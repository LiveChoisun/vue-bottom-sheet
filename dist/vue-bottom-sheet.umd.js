(function(n,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("hammerjs")):typeof define=="function"&&define.amd?define(["exports","vue","hammerjs"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.VueBottomSheet={},n.Vue,n.Hammer))})(this,function(n,e,s){"use strict";const w=l=>(e.pushScopeId("data-v-a0231cb9"),l=l(),e.popScopeId(),l),E=["aria-hidden"],V=[w(()=>e.createElementVNode("div",{class:"bottom-sheet__draggable-thumb"},null,-1))],k=e.defineComponent({__name:"VueBottomSheet",props:{overlay:{type:Boolean,default:!0},overlayColor:{default:"#0000004D"},maxWidth:{default:640},maxHeight:{},transitionDuration:{default:.5},overlayClickClose:{type:Boolean,default:!0},canSwipe:{type:Boolean,default:!0},mainClassName:{default:""},headerClassName:{default:""}},emits:["opened","closed","dragging-up","dragging-down"],setup(l,{expose:f,emit:i}){const o=l;e.useCssVars(t=>({"48aeb4c9":D.value,"2481b580":o.overlayColor,"123f9783":$.value,"747130a8":H.value,"62192cfc":M.value,"1ff1c96d":B.value}));const c=e.ref(!1),m=e.ref(0),r=e.ref(100),p=e.ref(!1),b=e.ref(0),_=e.ref(null),S=e.ref(null),d=e.ref(null),y=e.ref(null),x=e.ref(null),C=e.ref(null),T=t=>document.activeElement===t;window.addEventListener("keyup",t=>{if(!_.value)return;const a=_.value.contains(t.target)&&T(t.target);t.key==="Escape"&&!a&&h()});const I=e.computed(()=>["bottom-sheet__content",{"bottom-sheet__content--fullscreen":m.value>=window.innerHeight,"bottom-sheet__content--dragging":p.value}]),D=e.computed(()=>`${o.transitionDuration}s`),H=e.computed(()=>"auto"),B=e.computed(()=>o.maxHeight?`${o.maxHeight}px`:"inherit"),$=e.computed(()=>`${r.value}%`),M=e.computed(()=>`${o.maxWidth}px`),O=async()=>{await e.nextTick(),m.value=S.value.offsetHeight+d.value.clientHeight+y.value.offsetHeight},v=(t,a)=>{if(o.canSwipe){p.value=!0;const u=A=>{A.preventDefault()};t.deltaY>0&&(a==="main"&&t.type==="panup"&&(r.value=g(t.deltaY),t.cancelable&&d.value.addEventListener("touchmove",u)),a==="main"&&t.type==="pandown"&&b.value===0&&(r.value=g(t.deltaY)),a==="area"&&(r.value=g(t.deltaY)),t.type==="panup"&&i("dragging-up"),t.type==="pandown"&&i("dragging-down")),t.isFinal&&(d.value.removeEventListener("touchmove",u),a==="main"&&(b.value=d.value.scrollTop),p.value=!1,r.value>=10?h():r.value=0)}};e.nextTick(()=>{O();const t=new s(C.value,{inputClass:s.TouchMouseInput,recognizers:[[s.Pan,{direction:s.DIRECTION_VERTICAL}]]}),a=new s(d.value,{inputClass:s.TouchMouseInput,recognizers:[[s.Pan,{direction:s.DIRECTION_VERTICAL}]]});t.on("panstart panup pandown panend",u=>{v(u,"area")}),a.on("panstart panup pandown panend",u=>{v(u,"main")})});const Y=()=>{r.value=0,document.documentElement.style.overflowY="hidden",document.documentElement.style.overscrollBehavior="none",c.value=!0,i("opened")},h=async()=>{c.value=!1,r.value=100,setTimeout(()=>{document.documentElement.style.overflowY="visible",document.documentElement.style.overscrollBehavior="",i("closed")},o.transitionDuration*1e3)},z=()=>{o.overlayClickClose&&h()},g=t=>{const a=o.maxHeight&&o.maxHeight<=m.value?o.maxHeight:m.value;return t/a*100};return f({open:Y,close:h}),(t,a)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createElementVNode("div",{class:"bottom-sheet",ref_key:"bottomSheet",ref:_,"aria-hidden":!c.value,role:"dialog"},[e.createVNode(e.Transition,null,{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{onClick:z,class:"bottom-sheet__overlay"},null,512),[[e.vShow,t.overlay&&c.value]])]),_:1}),e.createElementVNode("div",{ref_key:"bottomSheetContent",ref:x,class:e.normalizeClass(I.value)},[e.createElementVNode("header",{ref_key:"bottomSheetHeader",ref:S,class:e.normalizeClass(t.headerClassName?`bottom-sheet__header ${t.headerClassName}`:"bottom-sheet__header")},[e.createElementVNode("div",{class:"bottom-sheet__draggable-area",ref_key:"bottomSheetDraggableArea",ref:C},V,512),e.renderSlot(t.$slots,"header",{},void 0,!0)],2),e.createElementVNode("main",{ref_key:"bottomSheetMain",ref:d,class:e.normalizeClass(t.mainClassName?`bottom-sheet__main ${t.mainClassName}`:"bottom-sheet__main")},[e.renderSlot(t.$slots,"default",{},void 0,!0)],2),e.createElementVNode("footer",{ref_key:"bottomSheetFooter",ref:y,class:"bottom-sheet__footer"},[e.renderSlot(t.$slots,"footer",{},void 0,!0)],512)],2)],8,E)]))}}),L="",N=((l,f)=>{const i=l.__vccOpts||l;for(const[o,c]of f)i[o]=c;return i})(k,[["__scopeId","data-v-a0231cb9"]]);n.default=N,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
